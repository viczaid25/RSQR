@model RSQR.Models.Reporte

@{
    ViewData["Title"] = "Editar Reporte";
}

<div class="content-wrapper">
    <div class="container-fluid">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="display-6 text-dark fw-bold">Editar Reporte</h1>
            <a asp-action="Index" class="btn btn-outline-secondary rounded-pill">
                <i class="fas fa-arrow-left me-1"></i> Volver a la lista
            </a>
        </div>

        <div class="card shadow-sm rounded-lg">
            <div class="card-header bg-primary">
                <h5 class="mb-0 text-white"><i class="fas fa-edit me-2"></i>Información del Reporte</h5>
            </div>
            <div class="card-body">
                <form asp-action="Edit" class="row g-3" enctype="multipart/form-data">
                    <div asp-validation-summary="ModelOnly" class="alert alert-danger rounded-lg"></div>
                    <input type="hidden" asp-for="Id" />

                    <!-- Sección 1: Información Básica -->
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input asp-for="Fecha" class="form-control" type="date" placeholder="Fecha" />
                            <label asp-for="Fecha">Fecha</label>
                            <span asp-validation-for="Fecha" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <select asp-for="ProblemRank" class="form-select" asp-items="ViewBag.ProblemRankList"></select>
                            <label asp-for="ProblemRank">Ranking del problema</label>
                            <span asp-validation-for="ProblemRank" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <input asp-for="UserName" class="form-control" placeholder="Usuario" readonly />
                            <label asp-for="UserName">Usuario</label>
                            <span asp-validation-for="UserName" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <select asp-for="Linea" class="form-select" asp-items="ViewBag.LineaList"></select>
                            <label asp-for="Linea">Línea</label>
                            <span asp-validation-for="Linea" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <select asp-for="Tipo" class="form-select" asp-items="Html.GetEnumSelectList<TipoReporte>()"></select>
                            <label asp-for="Tipo">Tipo</label>
                            <span asp-validation-for="Tipo" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input asp-for="TituloProblema" class="form-control" placeholder="Título del Problema" />
                            <label asp-for="TituloProblema">Título del Problema</label>
                            <span asp-validation-for="TituloProblema" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <select asp-for="CincoM" class="form-select" asp-items="Html.GetEnumSelectList<CincoMOpciones>()"></select>
                            <label asp-for="CincoM">5M</label>
                            <span asp-validation-for="CincoM" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <input asp-for="NumParteAfectado" class="form-control" placeholder="Número de Parte Afectado" />
                            <label asp-for="NumParteAfectado">Número de Parte Afectado</label>
                            <span asp-validation-for="NumParteAfectado" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <input asp-for="Lote" class="form-control" placeholder="Lote" />
                            <label asp-for="Lote">Lote</label>
                            <span asp-validation-for="Lote" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <input asp-for="CustomerClaimNumber" class="form-control" placeholder="Número de Reclamo" />
                            <label asp-for="CustomerClaimNumber">Número de Reclamo</label>
                            <span asp-validation-for="CustomerClaimNumber" class="text-danger small"></span>
                        </div>
                    </div>

                    <!-- Sección 2: Descripciones -->
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            <textarea asp-for="Descripcion" class="form-control" placeholder="Descripción" style="height: 100px"></textarea>
                            <label asp-for="Descripcion">Descripción</label>
                            <span asp-validation-for="Descripcion" class="text-danger small"></span>
                        </div>
                        <div class="form-floating mb-3">
                            <textarea asp-for="DescripcionProblema" class="form-control" placeholder="Descripción del Problema" style="height: 120px"></textarea>
                            <label asp-for="DescripcionProblema">Descripción del Problema</label>
                            <span asp-validation-for="DescripcionProblema" class="text-danger small"></span>
                        </div>
                    </div>

                    <!-- Sección 3: Análisis 5W2H -->
                    <div class="col-md-6">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-primary">
                                <h6 class="mb-0 text-white"><i class="fas fa-search me-2"></i>Análisis 5W2H</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-floating mb-3">
                                    <input asp-for="QueP" class="form-control" placeholder="¿Qué?" />
                                    <label asp-for="QueP">¿Qué?</label>
                                    <span asp-validation-for="QueP" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="PorqueP" class="form-control" placeholder="¿Por qué?" />
                                    <label asp-for="PorqueP">¿Por qué?</label>
                                    <span asp-validation-for="PorqueP" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="DondeP" class="form-control" placeholder="¿Dónde?" />
                                    <label asp-for="DondeP">¿Dónde?</label>
                                    <span asp-validation-for="DondeP" class="text-danger small"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-primary">
                                <h6 class="mb-0 text-white"><i class="fas fa-question-circle me-2"></i>Detalles Adicionales</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-floating mb-3">
                                    <input asp-for="QuienP" class="form-control" placeholder="¿Quién?" />
                                    <label asp-for="QuienP">¿Quién?</label>
                                    <span asp-validation-for="QuienP" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="CuandoP" class="form-control" type="date" placeholder="¿Cuándo?" />
                                    <label asp-for="CuandoP">¿Cuándo?</label>
                                    <span asp-validation-for="CuandoP" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="CuantosP" class="form-control" placeholder="¿Cuántos?" />
                                    <label asp-for="CuantosP">¿Cuántos?</label>
                                    <span asp-validation-for="CuantosP" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="ComoP" class="form-control" placeholder="¿Cómo?" />
                                    <label asp-for="ComoP">¿Cómo?</label>
                                    <span asp-validation-for="ComoP" class="text-danger small"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 4: Contención -->
                    <div class="col-12">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-primary">
                                <h6 class="mb-0 text-white"><i class="fas fa-shield-alt me-2"></i>Contención</h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input asp-for="ContencionItems" class="form-control" placeholder="Items" />
                                            <label asp-for="ContencionItems">Items</label>
                                            <span asp-validation-for="ContencionItems" class="text-danger small"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input asp-for="ContencionActividades" class="form-control" placeholder="Actividades" />
                                            <label asp-for="ContencionActividades">Actividades</label>
                                            <span asp-validation-for="ContencionActividades" class="text-danger small"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input asp-for="ContencionResponsables" class="form-control" placeholder="Responsables" />
                                            <label asp-for="ContencionResponsables">Responsables</label>
                                            <span asp-validation-for="ContencionResponsables" class="text-danger small"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input asp-for="ContencionFechasInicio" class="form-control" type="date" placeholder="Fechas Inicio" />
                                            <label asp-for="ContencionFechasInicio">Fechas Inicio</label>
                                            <span asp-validation-for="ContencionFechasInicio" class="text-danger small"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 5: Información Adicional -->
                    <div class="col-md-6">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-primary">
                                <h6 class="mb-0 text-white"><i class="fas fa-tasks me-2"></i>Acciones</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" role="switch" asp-for="AlertaCalidad" />
                                    <label class="form-check-label" asp-for="AlertaCalidad"></label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="Disposicion" class="form-control" placeholder="Disposición" />
                                    <label asp-for="Disposicion">Disposición</label>
                                    <span asp-validation-for="Disposicion" class="text-danger small"></span>
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" role="switch" asp-for="EntrevistaInvolucrados" />
                                    <label class="form-check-label" asp-for="EntrevistaInvolucrados"></label>
                                </div>
                                <div class="form-floating mb-3">
                                    <textarea asp-for="Comentarios" class="form-control" placeholder="Comentarios" style="height: 100px"></textarea>
                                    <label asp-for="Comentarios">Comentarios</label>
                                    <span asp-validation-for="Comentarios" class="text-danger small"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-primary">
                                <h6 class="mb-0 text-white"><i class="fas fa-chart-line me-2"></i>Evaluación</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-floating mb-3">
                                    <input asp-for="Severidad" class="form-control" placeholder="Severidad" />
                                    <label asp-for="Severidad">Severidad</label>
                                    <span asp-validation-for="Severidad" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="Ocurrencia" class="form-control" placeholder="Ocurrencia" />
                                    <label asp-for="Ocurrencia">Ocurrencia</label>
                                    <span asp-validation-for="Ocurrencia" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="Deteccion" class="form-control" placeholder="Detección" />
                                    <label asp-for="Deteccion">Detección</label>
                                    <span asp-validation-for="Deteccion" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <input asp-for="AP_NPR" class="form-control" placeholder="AP/NPR" />
                                    <label asp-for="AP_NPR">AP/NPR</label>
                                    <span asp-validation-for="AP_NPR" class="text-danger small"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 6: Otros Datos -->
                    <div class="col-12">
                        <div class="card shadow-sm mb-4">
                            <div class="card-header bg-primary">
                                <h6 class="mb-0 text-white"><i class="fas fa-file-alt me-2"></i>Análisis y Controles</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-floating mb-3">
                                    <textarea asp-for="ModoFalla" class="form-control" placeholder="Modo de Falla" style="height: 120px"></textarea>
                                    <label asp-for="ModoFalla">Modo de Falla</label>
                                    <span asp-validation-for="ModoFalla" class="text-danger small"></span>
                                </div>
                                <div class="form-floating mb-3">
                                    <textarea asp-for="ControlesEstablecidos" class="form-control" placeholder="Controles Establecidos" style="height: 120px"></textarea>
                                    <label asp-for="ControlesEstablecidos">Controles Establecidos</label>
                                    <span asp-validation-for="ControlesEstablecidos" class="text-danger small"></span>
                                </div>
                                <div class="mb-3">
                                    <label asp-for="EvidenciaFotografica" class="form-label">Evidencia Fotográfica</label>
                                    <input asp-for="EvidenciaFotografica" class="form-control" type="file" multiple />
                                    <span asp-validation-for="EvidenciaFotografica" class="text-danger small"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Botón de Guardar -->
                    <div class="col-12">
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg rounded-pill">
                                <i class="fas fa-save me-1"></i> Guardar Cambios
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}